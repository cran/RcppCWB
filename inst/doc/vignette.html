<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Andreas Blaette (andreas.blaette@uni-due.de)" />

<meta name="date" content="2018-01-09" />

<title>Introducing RcppCWB</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Introducing RcppCWB</h1>
<h4 class="author"><em>Andreas Blaette (<a href="mailto:andreas.blaette@uni-due.de">andreas.blaette@uni-due.de</a>)</em></h4>
<h4 class="date"><em>2018-01-09</em></h4>



<div id="introducing-rcppcwb" class="section level1">
<h1>Introducing RcppCWB</h1>
<p>The corpus library (CL) is a C library offering low-level access to CWB-indexed corpora. This package offers wrappers for core functions of the corpus library, and functions for performance critial tasks in the polmineR package.</p>
<div id="annex-cross-compiling-libcl-and-the-corpus-workbench-cwb" class="section level2">
<h2>Annex: Cross-compiling libcl and the Corpus Workbench (CWB)</h2>
<div id="potentially-useful-resources" class="section level3">
<h3>Potentially useful resources</h3>
<p>A very good description: www.blogcompiler.com/2010/07/11/compile-for-windows-on-linux</p>
<p>INSTALL.WIN script in the cwb directory with installation files is extremely helpful up to the point where it comes to cross-compiling glib.</p>
</div>
<div id="preparations" class="section level3">
<h3>Preparations</h3>
<p>Installation of x86_64-w64-mingw32-gcc on a Linux machine.</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> apt-get install mingw-w64</code></pre></div>
<p>To get the installation directory for cross-compilation:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="va">MINGW_OUTPUT_TMP=</span><span class="kw">`</span><span class="ex">x86_64-w64-mingw32-gcc</span> --print-search-dirs <span class="kw">|</span> <span class="fu">grep</span> ^install<span class="kw">`</span>; <span class="bu">echo</span> <span class="va">${MINGW_OUTPUT_TMP:9}</span></code></pre></div>
<p>Note: This line is from the INSTALL.WIN instructions.</p>
</div>
<div id="cross-compilation-64bit" class="section level3">
<h3>Cross-compilation (64bit)</h3>
<div id="pcre" class="section level4">
<h4>pcre</h4>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.39.tar.gz
<span class="fu">tar</span> xzfv pcre-8.39.tar.gz
<span class="bu">cd</span> pcre-8.39
<span class="va">CC=</span>x86_64-w64-mingw32-gcc <span class="va">CC_FOR_BUILD=</span>gcc  <span class="ex">./configure</span>    \
--host=x86_64-w64-mingw32                                  \
--enable-utf8 --enable-unicode-properties --enable-jit     \
--enable-pcre16 --enable-pcre32                            \
--enable-newline-is-any --disable-cpp --enable-static      \
--prefix=/usr/lib/gcc/x86_64-w64-mingw32/4.8/              \
--exec-prefix=/usr/lib/gcc/x86_64-w64-mingw32/4.8/         \
--oldincludedir=/usr/lib/gcc/x86_64-w64-mingw32/4.8//include
<span class="fu">make</span>
<span class="fu">sudo</span> make install</code></pre></div>
</div>
<div id="libiconv" class="section level4">
<h4>libiconv</h4>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> https://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.15.tar.gz
<span class="fu">tar</span> xzfv libiconv-1.15.tar.gz
<span class="bu">cd</span> libiconv-1.15/
<span class="va">CC=</span>x86_64-w64-mingw32-gcc <span class="va">CC_FOR_BUILD=</span>gcc <span class="ex">./configure</span>       \
--host=x86_64-w64-mingw32                                    \
--enable-static \
--prefix=/usr/lib/gcc/x86_64-w64-mingw32/4.8/                \
--exec-prefix=/usr/lib/gcc/x86_64-w64-mingw32/4.8/           \
--oldincludedir=/usr/lib/gcc/x86_64-w64-mingw32/4.8/include
<span class="fu">make</span> 
<span class="fu">sudo</span> make install</code></pre></div>
</div>
<div id="expat" class="section level4">
<h4>expat</h4>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> http://downloads.sourceforge.net/expat/expat-2.1.0.tar.gz
<span class="fu">tar</span> xzfv expat-2.1.0.tar.gz
<span class="bu">cd</span> expat-2.1.0
<span class="va">CC=</span>x86_64-w64-mingw32-gcc <span class="va">CC_FOR_BUILD=</span>gcc                            <span class="kw">\</span>
<span class="ex">./configure</span>                                                           \
--host=x86_64-w64-mingw32                                    \
--prefix=/usr/lib/gcc/x86_64-w64-mingw32/4.8/                \
--exec-prefix=/usr/lib/gcc/x86_64-w64-mingw32/4.8/           \
--oldincludedir=/usr/lib/gcc/x86_64-w64-mingw32/4.8/include
<span class="fu">make</span> 
<span class="fu">sudo</span> make install</code></pre></div>
</div>
</div>
<div id="gettext" class="section level3">
<h3>gettext</h3>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> http://ftp.gnu.org/pub/gnu/gettext/gettext-latest.tar.gz
<span class="fu">tar</span> xzfv gettext-latest.tar.gz
<span class="bu">cd</span> gettext-0.19.8.1/
  <span class="va">CC=</span>x86_64-w64-mingw32-gcc <span class="va">CC_FOR_BUILD=</span>gcc                            <span class="kw">\</span>
<span class="ex">./configure</span>                                                           \
--host=x86_64-w64-mingw32                                    \
--prefix=/usr/lib/gcc/x86_64-w64-mingw32/4.8/                \
--exec-prefix=/usr/lib/gcc/x86_64-w64-mingw32/4.8/           \
--oldincludedir=/usr/lib/gcc/x86_64-w64-mingw32/4.8/include
<span class="fu">make</span>
<span class="fu">sudo</span> make install</code></pre></div>
</div>
<div id="libffi" class="section level3">
<h3>libffi</h3>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> ftp://sourceware.org/pub/libffi/libffi-3.2.tar.gz
<span class="fu">tar</span> xzfv libffi-3.2.tar.gz
<span class="bu">cd</span> libffi-3.2
<span class="va">LIBFFI_CFLAGS=</span>/usr/lib/gcc/x86_64-w64-mingw32/4.8/include             <span class="kw">\</span>
<span class="va">LIBFFI_LIBS=</span>/usr/lib/gcc/x86_64-w64-mingw32/4.8/lib                   <span class="kw">\</span>
<span class="va">CC=</span>x86_64-w64-mingw32-gcc <span class="va">CC_FOR_BUILD=</span>gcc                            <span class="kw">\</span>
<span class="ex">./configure</span>                                                           \
--host=x86_64-w64-mingw32                                    \
--prefix=/usr/lib/gcc/x86_64-w64-mingw32/4.8/                \
--exec-prefix=/usr/lib/gcc/x86_64-w64-mingw32/4.8/           \
--oldincludedir=/usr/lib/gcc/x86_64-w64-mingw32/4.8/include
<span class="fu">make</span> 
<span class="fu">sudo</span> make install</code></pre></div>
</div>
<div id="glib" class="section level3">
<h3>glib</h3>
<p>It never worked to do it myself. Here you can get binaries in a simple and dirty way: BEST CHOICE!!</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> http://ftp.gnome.org/pub/gnome/binaries/win64/glib/2.26/</code></pre></div>
<p>Copy files to cross compiler dirs after download.</p>
<p>This is where I finally got libglib-2.0.0.dll:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> http://ftp.gnome.org/pub/gnome/binaries/win64/glib/2.26/glib_2.26.0-1_win64.zip</code></pre></div>
<p>This is the effort to cross compile glib myself - it always failed, which seems to be a typical problem</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> http://ftp.gnome.org/pub/gnome/sources/glib/2.50/glib-2.50.0.tar.xz
<span class="fu">tar</span> xf glib-2.50.0.tar.xz
<span class="bu">cd</span> glib-2.50.0
<span class="bu">export</span> <span class="va">PATH=$PATH</span>:/usr/lib/gcc/x86_64-w64-mingw32/4.8/bin
<span class="va">CFLAGS=</span><span class="st">&quot;-I/usr/lib/gcc/x86_64-w64-mingw32/4.8/include&quot;</span>                <span class="kw">\</span>
<span class="va">LIBFFI_CFLAGS=</span>/usr/lib/gcc/x86_64-w64-mingw32/4.8/include             <span class="kw">\</span>
<span class="va">LIBFFI_LIBS=</span>/usr/lib/gcc/x86_64-w64-mingw32/4.8/lib                   <span class="kw">\</span>
<span class="va">CC=</span>x86_64-w64-mingw32-gcc <span class="va">CC_FOR_BUILD=</span>gcc  <span class="ex">./configure</span>               \
--host=x86_64-w64-mingw32                                    \
--prefix=/usr/lib/gcc/x86_64-w64-mingw32/4.8/                \
--exec-prefix=/usr/lib/gcc/x86_64-w64-mingw32/4.8/           \
--oldincludedir=/usr/lib/gcc/x86_64-w64-mingw32/4.8/include</code></pre></div>
<div id="cwb" class="section level4">
<h4>CWB</h4>
<p>Basically, I followed the instructions in the INSTALL.WIN file. In addition:</p>
<ul>
<li>Got a fresh copy of CWB with svn</li>
<li>made the following changes in config.mk:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="va">PLATFORM=</span>mingw-cross
<span class="va">SITE=</span>windows-release
<span class="co"># RELEASE_ARCH = x86_64 </span>
<span class="ex">CC</span> = x86_64-w64-mingw32-gcc
<span class="va">LIBPCRE_DLL_PATH=</span>/usr/lib/gcc/x86_64-w64-mingw32/4.8/bin
<span class="va">LIBGLIB_DLL_PATH=</span>/usr/lib/gcc/x86_64-w64-mingw32/4.8/lib</code></pre></div>
<ul>
<li>in ./config/platform replaced every ‘i586 …’ with ‘x86_64-w64-mingw32’</li>
</ul>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">CC</span> = x86_64-w64-mingw32-gcc
<span class="ex">LD</span> = x86_64-w64-mingw32-ld
<span class="ex">RC</span> = x86_64-w64-mingw32-windres
<span class="ex">AR</span> = x86_64-w64-mingw32-ar cq
<span class="ex">RANLIB</span> = x86_64-w64-mingw32-ranlib
<span class="ex">RELEASE_ARCH</span> = x86
<span class="ex">RELEASE_OS</span> = windows
<span class="ex">DEPEND</span> = x86_64-w64-mingw32-gcc -MM -MG</code></pre></div>
<ul>
<li>used grep ‘i586’ for hunting</li>
</ul>
<p>At the end, instructions of INSTALL-WIN again:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">make</span> clean
<span class="fu">make</span> depend
<span class="fu">make</span> all
<span class="fu">make</span> release</code></pre></div>
<p>At the very end, I manipulated the package that is generated manually:</p>
<ul>
<li><p>I put additional dlls / dependencies into the bin directory that might be missing.</p></li>
<li><p>I changed that *.bat file for the installation so that the target directory would be Program Files (x86) rathen than Program Files - to avoid that a 32 bit installation is written over</p></li>
</ul>
<p>I think for ‘make release’, certain dlls were still missing (libglib-2.0.0.dll), so I downloaded that manually from a source indicated above and put that into the bin dir in the cross compiler directory.</p>
</div>
</div>
<div id="cross-compilation-32bit" class="section level3">
<h3>Cross-compilation (32bit)</h3>
<div id="pcre-1" class="section level4">
<h4>pcre</h4>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.39.tar.gz
<span class="fu">tar</span> xzfv pcre-8.39.tar.gz
<span class="bu">cd</span> pcre-8.39
<span class="va">CC=</span>i686-w64-mingw32-gcc <span class="va">CC_FOR_BUILD=</span>gcc  <span class="ex">./configure</span>    \
--host=i686-w64-mingw32                                  \
--enable-utf8 --enable-unicode-properties --enable-jit     \
--enable-newline-is-any --disable-cpp --enable-static      \
--prefix=/usr/lib/gcc/i686-w64-mingw32/4.8              \
--exec-prefix=/usr/lib/gcc/i686-w64-mingw32/4.8         \
--oldincludedir=/usr/lib/gcc/i686-w64-mingw32/4.8/include
<span class="fu">make</span>
<span class="fu">sudo</span> make install</code></pre></div>
</div>
<div id="iconv" class="section level4">
<h4>iconv</h4>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> https://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.15.tar.gz
<span class="fu">tar</span> xzfv libiconv-1.15.tar.gz
<span class="bu">cd</span> libiconv-1.15/
<span class="va">CC=</span>i686-w64-mingw32-gcc <span class="va">CC_FOR_BUILD=</span>gcc <span class="ex">./configure</span>      \
--host=i686-w64-mingw32                                   \
--prefix=/usr/lib/gcc/i686-w64-mingw32/4.8                \
--enable-static                                           \
--exec-prefix=/usr/lib/gcc/i686-w64-mingw32/4.8           \
--oldincludedir=/usr/lib/gcc/i686-w64-mingw32/4.8/include
<span class="fu">make</span> 
<span class="fu">sudo</span> make install</code></pre></div>
</div>
<div id="expat-1" class="section level4">
<h4>expat</h4>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> http://downloads.sourceforge.net/expat/expat-2.1.0.tar.gz
<span class="fu">tar</span> xzfv expat-2.1.0.tar.gz
<span class="bu">cd</span> expat-2.1.0
<span class="va">CC=</span>i686-w64-mingw32-gcc <span class="va">CC_FOR_BUILD=</span>gcc                            <span class="kw">\</span>
<span class="ex">./configure</span>                                                           \
--host=i686-w64-mingw32                                    \
--prefix=/usr/lib/gcc/i686-w64-mingw32/4.8/                \
--exec-prefix=/usr/lib/gcc/i686-w64-mingw32/4.8/           \
--oldincludedir=/usr/lib/gcc/i686-w64-mingw32/4.8/include
<span class="fu">make</span> 
<span class="fu">sudo</span> make install</code></pre></div>
</div>
<div id="liblzma" class="section level4">
<h4>liblzma</h4>
<p>liblzma von github clonen</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="bu">cd</span> lzma/
<span class="va">CC=</span>i686-w64-mingw32-gcc <span class="va">CC_FOR_BUILD=</span>gcc                            <span class="kw">\</span>
<span class="ex">./configure</span>                                                           \
--host=i686-w64-mingw32                                    \
--prefix=/usr/lib/gcc/i686-w64-mingw32/4.8/                \
--exec-prefix=/usr/lib/gcc/i686-w64-mingw32/4.8/
<span class="fu">make</span>
<span class="fu">sudo</span> make install</code></pre></div>
</div>
<div id="libxml2" class="section level4">
<h4>libxml2</h4>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> ftp://xmlsoft.org/libxml2/libxml2-sources-2.9.7.tar.gz
<span class="fu">tar</span> xzfv libxml2-sources-2.9.7.tar.gz
<span class="bu">cd</span> libxml2-2.9.7/
<span class="va">CC=</span>i686-w64-mingw32-gcc <span class="va">CC_FOR_BUILD=</span>gcc                            <span class="kw">\</span>
<span class="ex">./configure</span>                                                           \
--host=i686-w64-mingw32                                    \
--prefix=/usr/lib/gcc/i686-w64-mingw32/4.8/                \
--exec-prefix=/usr/lib/gcc/i686-w64-mingw32/4.8/
<span class="bu">export</span> <span class="va">PATH=$PATH</span>:/usr/lib/gcc/i686-w64-mingw32/4.8/lib
<span class="fu">make</span> 
<span class="fu">sudo</span> make install</code></pre></div>
</div>
<div id="gettext-1" class="section level4">
<h4>gettext</h4>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> http://ftp.gnu.org/pub/gnu/gettext/gettext-latest.tar.gz
<span class="fu">tar</span> xzfv gettext-latest.tar.gz
<span class="bu">cd</span> gettext-0.19.8.1/
<span class="bu">export</span> <span class="va">CFLAGS=</span><span class="st">&quot;</span><span class="va">$CFLAGS</span><span class="st"> -O2&quot;</span>
<span class="bu">export</span> <span class="va">CXXFLAGS=</span><span class="st">&quot;</span><span class="va">$CXXFLAGS</span><span class="st"> -O2&quot;</span>
<span class="va">CC=</span>i686-w64-mingw32-gcc <span class="va">CC_FOR_BUILD=</span>gcc <span class="ex">./configure</span>         \
--host=i686-w64-mingw32                                      \
--prefix=/usr/lib/gcc/i686-w64-mingw32/4.8/                  \
--exec-prefix=/usr/lib/gcc/i686-w64-mingw32/4.8/             \
--with-libiconv-prefix=/usr/lib/gcc/i686-w64-mingw32/4.8/lib \
--oldincludedir=/usr/lib/gcc/i686-w64-mingw32/4.8/include
<span class="fu">make</span>
<span class="fu">sudo</span> make install</code></pre></div>
</div>
<div id="libffi-1" class="section level4">
<h4>libffi</h4>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> ftp://sourceware.org/pub/libffi/libffi-3.2.tar.gz
<span class="fu">tar</span> xzfv libffi-3.2.tar.gz
<span class="bu">cd</span> libffi-3.2
<span class="va">LIBFFI_CFLAGS=</span>/usr/lib/gcc/i686-w64-mingw32/4.8/include             <span class="kw">\</span>
<span class="va">LIBFFI_LIBS=</span>/usr/lib/gcc/i686-w64-mingw32/4.8/lib                   <span class="kw">\</span>
<span class="va">CC=</span>i686-w64-mingw32-gcc <span class="va">CC_FOR_BUILD=</span>gcc <span class="ex">./configure</span>                \
--host=i686-w64-mingw32                                    \
--prefix=/usr/lib/gcc/i686-w64-mingw32/4.8/                \
--exec-prefix=/usr/lib/gcc/i686-w64-mingw32/4.8/           \
--oldincludedir=/usr/lib/gcc/i686-w64-mingw32/4.8/include
<span class="fu">make</span> 
<span class="fu">sudo</span> make install</code></pre></div>
</div>
<div id="glib-1" class="section level4">
<h4>glib</h4>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">wget</span> http://ftp.gnome.org/pub/gnome/sources/glib/2.50/glib-2.50.0.tar.xz
<span class="fu">tar</span> xf glib-2.50.0.tar.xz
<span class="bu">cd</span> glib-2.50.0
<span class="bu">export</span> <span class="va">PATH=$PATH</span>:/usr/lib/gcc/i686-w64-mingw32/4.8/bin
<span class="va">CFLAGS=</span><span class="st">&quot;-I/usr/lib/gcc/i686-w64-mingw32/4.8/include&quot;</span>                <span class="kw">\</span>
<span class="va">LIBFFI_CFLAGS=</span>/usr/lib/gcc/i686-w64-mingw32/4.8/include             <span class="kw">\</span>
<span class="va">LIBFFI_LIBS=</span>/usr/lib/gcc/i686-w64-mingw32/4.8/lib                   <span class="kw">\</span>
<span class="va">CC=</span>i686-w64-mingw32-gcc <span class="va">CC_FOR_BUILD=</span>gcc  <span class="ex">./configure</span>               \
--host=i686-w64-mingw32                                    \
--prefix=/usr/lib/gcc/i686-w64-mingw32/4.8/                \
--exec-prefix=/usr/lib/gcc/i686-w64-mingw32/4.8/           \
--oldincludedir=/usr/lib/gcc/i686-w64-mingw32/4.8/include</code></pre></div>
</div>
</div>
<div id="create-libcl.a-static-library" class="section level3">
<h3>Create libcl.a static library</h3>
<p>The essential workflow is as follows. In the directory of the Corpus Workbench execute:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">make</span> clean
<span class="fu">make</span> depend
<span class="fu">make</span> cl</code></pre></div>
<p>It is necessary to include the following line in cl/regopt.c: #include &lt;pcre.h&gt;</p>
<p>Compile the file again:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">i686-w64-mingw32-gcc</span> -c -o regopt.o -O2 -Wall             \
  -static                                                 \
  -D__MINGW__ -DEMULATE_SETENV -DG_OS_WIN32               \
  -DREGISTRY_DEFAULT_PATH=<span class="dt">\&quot;</span><span class="st">&quot;C:</span><span class="dt">\\\\</span><span class="st">CWB</span><span class="dt">\\\\</span><span class="st">Registry&quot;</span><span class="dt">\&quot;</span>     \
  -DCOMPILE_DATE=<span class="dt">\&quot;</span><span class="st">&quot;So 24. Dez 22:14:00 CET 2017&quot;</span><span class="dt">\&quot;</span>       \
  -DPCRE_STATIC=-1                                        \
  -DVERSION=<span class="dt">\&quot;</span>3.4.12<span class="dt">\&quot;</span>                                    \
  -I/usr/include/glib-2.0                                 \
  -I/usr/lib/x86_64-linux-gnu/glib-2.0/include            \
  -I/usr/lib/gcc/i686-w64-mingw32/4.8/include             \
  regopt.c</code></pre></div>
<p>This throws one warning (if (ch &gt;= 32 &amp; ch &lt; 127)) that can be ignored. Combine the object files into to the static library.</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">i686-w64-mingw32-ar</span> cq libcl.a globals.o macros.o list.o  \
  lexhash.o ngram-hash.o bitfields.o storage.o            \
  fileutils.o special-chars.o regopt.o corpus.o           \
  attributes.o registry.tab.o lex.creg.o makecomps.o      \
  cdaccess.o bitio.o endian.o compression.o binsert.o     \
  class-mapping.o windows-mmap.o

<span class="ex">i686-w64-mingw32-ranlib</span> libcl.a</code></pre></div>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
